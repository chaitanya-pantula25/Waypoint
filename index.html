<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waypoint - Trekking Information Portal</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-left">
                <div class="logo" onclick="window.location.href='index.html'">
                    <img src="logo.png" alt="Waypoint Logo" class="nav-logo-img">
                    <span>Waypoint</span>
                </div>
            </div>
            <div class="nav-center">
                <div class="search-bar">
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                        <path d="M12.5 11H11.71L11.43 10.73C12.41 9.59 13 8.11 13 6.5C13 2.91 10.09 0 6.5 0C2.91 0 0 2.91 0 6.5C0 10.09 2.91 13 6.5 13C8.11 13 9.59 12.41 10.73 11.43L11 11.71V12.5L16 17.49L17.49 16L12.5 11ZM6.5 11C4.01 11 2 8.99 2 6.5C2 4.01 4.01 2 6.5 2C8.99 2 11 4.01 11 6.5C11 8.99 8.99 11 6.5 11Z" fill="currentColor"/>
                    </svg>
                    <input type="text" id="searchInput" placeholder="Search treks...">
                </div>
            </div>
            <div class="nav-right">
                <button class="nav-btn" id="discoverBtn">Discover</button>
                <button class="nav-btn" id="addTrekBtn">Add your treks</button>
                <button class="nav-btn" id="planTrekBtn">Plan a trek</button>
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
                    <svg class="sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                    <svg class="moon-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                </button>
                <div id="authSection">
                    <button class="nav-btn auth-btn" id="loginBtn">Log in/Sign Up</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1 class="hero-title">Discover Your Next Adventure</h1>
            <p class="hero-subtitle">Explore India's most beautiful trekking trails</p>
            <div class="hero-buttons">
                <button class="btn btn-primary" id="heroDiscoverBtn">Explore Treks</button>
                <button class="btn btn-secondary" id="heroPlanBtn">Plan Your Trek</button>
                <button class="btn btn-secondary" id="heroNearestBtn">üìç Find Nearest Treks</button>
            </div>
        </div>
        <div class="hero-image">
            <div class="hero-placeholder">
                <img src = "logo.png" alt="Hero Image Placeholder" class="hero-img">
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features">
        <div class="container">
            <div class="feature-card">
                <div class="feature-icon">
                  <img src ="interactive_maps.png" alt="Interactive Maps Icon" class="feature-img" style="height: 90px; width: 90px;">
                </div>
                <h3>Interactive Maps</h3>
                <p>Explore treks with detailed maps and accurate locations</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <img src ="track_progess.png" alt="Track Progress Icon" class="feature-img" style="height: 90px; width: 90px;">
                </div>
                <h3>Track Progress</h3>
                <p>Monitor your trekking statistics and achievements</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">
                    <img src ="gpx_downloads.png" alt="GPX Downloads Icon" class="feature-img" style="height: 90px; width: 90px;">
                </div>
                <h3>GPX Downloads</h3>
                <p>Download trail files for your navigation devices</p>
            </div>
        </div>
    </section>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="app.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const heroNearestBtn = document.getElementById('heroNearestBtn');

            if (heroNearestBtn) {
                heroNearestBtn.addEventListener('click', () => {
                    if (!('geolocation' in navigator)) {
                        alert('Geolocation is not supported by your browser.');
                        return;
                    }

                    const originalText = heroNearestBtn.textContent;
                    heroNearestBtn.disabled = true;
                    heroNearestBtn.textContent = 'Locating...';

                    navigator.geolocation.getCurrentPosition(
                        (position) => {
                            const { latitude, longitude } = position.coords;
                            const url = `discover.html?lat=${encodeURIComponent(latitude)}&lon=${encodeURIComponent(longitude)}&nearest=true`;
                            window.location.href = url;
                        },
                        (error) => {
                            heroNearestBtn.disabled = false;
                            heroNearestBtn.textContent = originalText;

                            if (error.code === error.PERMISSION_DENIED) {
                                alert('We could not access your location. Please allow location access in your browser and try again.');
                            } else {
                                alert('Unable to fetch your location right now. Please try again in a moment.');
                            }
                        },
                        {
                            enableHighAccuracy: true,
                            timeout: 10000
                        }
                    );
                });
            }
        });
    </script>
</body>
</html>
